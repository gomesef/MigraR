
# Migrar

MigraR is a graphical user interface (GUI) software  implemented in R using the Shiny framework. MigraR can be accessible online via the [Shinyapps.io server](https://nirbhaya-shaji.shinyapps.io/migrar/). It runs in MS Windows, Linux and macOS and requires prior installation of [R](https://www.r-project.org/) and [RStudio](https://www.rstudio.com/products/rstudio/download/). 

MigraR is cross-platform, with an intuitive graphical user interface, running from open-source R and RStudio. With no need for expert knowledge in mathematical data analysis software, MigraR drastically simplifies the plotting and analysis of migration parameters and cell trajectories. 

MigraR was developed to assist biomedical researchers in the analysis of cell trajectories and migration parameters. MigraR does not perform tracking of cells from time-lapse videos; rather, it processes data sheets of x,y coordinates along time that are delivered by upstream image processing and cell tracking software.

# Installation/Running

MigraR sources can be downloaded from [GitHub](https://github.com/nirbhayashaji/MigraR.git). To execute MigraR, users must download the files **server.R** and **ui.R** to the working directory of RStudio and double click on the **server.R** file or open it using the file browser. The file will open in RStudio, wherefrom it can be executed by clicking _Run App_. MigraR will open in your default browser. To upload the cell tracking data, users simply have to click on the _Browse_ button listed first on the left panel as shown in the below figure.

Figure

Users must be connected to the internet for the initial run so that the required packages can be installed. From there, no internet connection is necessary for executing the application.

\subsection{Data sets}
The data sources of MigraR are files (txt, csv or xlsx format) generated by dedicated cell-tracking software – an example (provided from Imaris\textsuperscript{TM}) is shown in Fig.\ref{DataSource}. In these files, data must be organized in four columns, as follows: column A) $x$ coordinates; column B) $y$ coordinates; column D) time; column E) TrackID (i.e., the cell track identifier, attributed by the cell tracking software). Some cell tracking software might also deliver $z$ coordinates listed in one additional column – column C in the example of Fig.\ref{DataSource}. If the data file does not display $z$ coordinates, users must introduce one mock (empty or randomly filled) column C, in order to make run in MigraR. The upload of input files to MigraR is performed by clicking the \textit{Browse} button bellow the \textit{Choose File} text (Fig.\ref{FigureTraj}).  

\subsection{The four windows of MigraR}
MigraR offers an intuitive graphical user interface for plotting and calculating cell migration parameters. MigraR automatically calculates velocity, straightness and direction of movement based on the spatial and temporal coordinates listed on the uploaded MSExcel file. The workflow of MigraR is organized in four windows (\textit{Trajectories}, \textit{Velocity}, \textit{Straightness}, and \textit{Direction}), which can be selected from the respective tabs at the top of the large right side panel (Fig.\ref{FigureTraj}).

The \textit{Trajectories} window (accessible from the \textit{Trajectories} tab). The Trajectories window depicts the visual projection of single-cell trajectories (Fig.\ref{FigureTraj}). These can be visualized according to three \textit{View Mode} options, available on the left panel: 
\begin{enumerate}[i.]
 \item the \textit{Normal} view mode is the default option, which provides a close-to-real projection of cell trajectories along the $x$,$y$ axes;
  \item in the \textit{Track ID} mode, individual cell trajectories are distinguished based on color;
  \item in the \textit{Rose Plot} option, the starting positions of each cell trajectory are normalized to $x$,$y$ origin (0,0). Scales of $x$,$y$ axes can be adjusted using scroll bars on the bottom-right.
\end{enumerate}

By clicking on the \textit{Download plot} button at the bottom of the charts, users can download the plot as an image file of \textit{.png} type.

The \textit{Velocity} and \textit{Straightness} windows (Fig.\ref{FigureVS}) display box and whisker charters, plotted from the velocity and straightness values that MigraR computes for set of cell trajectories under analysis. Velocity values refer to the average velocity that each cell assumes along its trajectory. Straightness values refer to the behavior of each cell between the first and the last time point of its trajectory. By pressing the \textit{Download plot} buttons, users can generate and save the plot as \textit{.png} files.



\textit{Download the Velocity data} and \textit{Download the Straightness data} buttons generate \textit{.csv} files listing the values of velocity and straightness displayed on the corresponding plots. These \textit{.csv} files can be used for subsequent comparative and statistical analyses between different data sets using dedicated software.

The \textit{Direction} window (Fig.\ref{FigureDire}) is presented with two options, which can be chosen from the radio buttons on the left panel. On the first, \textit{Direction of Trajectories}, users can visualize and download plots where cell trajectories appear in different colors based on the direction of the movement. These cell trajectories plots are available in both their \textit{Normal View} and \textit{Rose Plot} modes. 



In the first pair of plots, cells are colored with a red-to-yellow gradient according to their horizontal directional choices: cells moving to the left are colored red; cells moving to the right are colored yellow. In the second pair of plots, cells are colored with a blue-to-green gradient according to their vertical directional choices: cells moving to the up are colored blue; cells moving to the down are colored green. 

The second option, \textit{Angle of Trajectories}, shows the frequency of cell trajectories moving within the range of  $0-360\degree$ angles, over intervals of 4 degrees. Data are plotted both as column chart (\textit{Angle Frequency}) and \textit{Rose Plot}. These plots, as well as the corresponding data sets are available for download using buttons similar to the ones in the previous windows. 

\subsection{Visualizing Directional and Random movements }

In Fig.\ref{FigureFinal}, we show representative graphical outputs generated by MigraR, starting from two distinct sets of data: one of the datasets (upper panels, ‘Directional movement’) compiles the trajectories of cells exposed to a chemoattractant placed on their left; the other dataset (lower panels, ‘Random movement’) refers to cells that, in the absence of a specific migratory stimulus, moved randomly. Notably, all five graphical displays produced by MigraR translate the different directional choices of cells in each of the experimental conditions under analysis.



\subsection{The adjustments function of MigraR}
All MigraR windows run in parallel with adjustment functions, which can be operated from the left side panel of the graphical interface. Here, users can find three scroll bars whose purpose is to narrow data sets based on the following parameters: Time, Velocity (Speed), and Straightness as shown in Fig.\ref{FigureDire}. With these functions, users can refine their data sets to exclude outliers resulting from inaccurate tracking [e.g. cells that do not move (most likely dead cells), or to cells that move too fast and/or move with straightness values equal to 1 (corresponding to straight lines, unlikely to occur in nature)]. 

Particularly useful is the possibility of narrowing data sets based on time intervals – with this option, users can look into the dynamics of cell migration at different instants of movie acquisition and chose the most appropriate interval for their analysis. A \textit{Reset} button, at the bottom of this panel, allows users to go back to the original data set. Importantly, these scroll bars work inter-connectedly between windows, i.e. scrolling one of these bars in one window automatically adjusts the same scroll bar in the remaining windows. 


